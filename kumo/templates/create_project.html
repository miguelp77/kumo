{% extends "base.html" %}

{% block content %}

<div id="form" class="create-allocation">
  <h4>{{action}} Imputaci贸n</h4>


  <form method="POST" enctype="multipart/form-data">
    <div class="row">
      <div class="col s3">
        <div class="form-group">
          <label for="title">Nombre</label>
          <input type="text" name="name" id="name" disabled value="{{session.profile.displayName}}" class="form-control"/>
        </div>
      </div>
      <div class="col s3">
        <div class="form-group">
          <label for="title">Email</label>
          <input type="text" name="email" id="email" disabled value="{{session.profile.emails.0.value}}" class="form-control"/>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s3">
        <select name="project" id="project" class="form-control" required>
          <option value="{{allocation.project}}" disabled selected>{% if allocation.project %}{{allocation.project_name}}{%else%}Elija una opci贸n{%endif%}</option>
          {% for pjs in projects %}
            <option value="{{pjs.id}}" data-id="{{pjs.approver}}" data-type="{{pjs.hours_type}}" >{{pjs.name}}</option>
          {% endfor %}
        </select>
        <label>Proyecto</label>
      </div>
      
      <div class="input-field col s3">
        <select name="approver" id="approver" class="form-control" required>
          <option value="{{allocation.approver}}" disabled selected>{% if allocation.project %}{{allocation.approver}}{%else%}Elija una opci贸n{%endif%}</option>
        </select>
        <label>Aprobador</label>
      </div>
      <div class="input-field col s3">
        <select name="hours_type" id="hours_type" class="form-control">
          <option value="{{allocation.hours_type}}" disabled selected>{% if allocation.project %}{{allocation.hours_type}}{%else%}Elija una opci贸n{%endif%}</option>
        </select>
        <label>Tipo</label>
      </div>
    </div>
    
    <div class="row">  
      <div class="col s1">
        <div class="form-group">
          <label for="title">Desde</label>
          <input type="text" id="start_date" name="start_date" value="{{allocation.formated_start_date}}" class="form-control datepicker" />
        </div>
      </div>  
      <div class="col s1">
        <div class="form-group">
          <label for="title">Hasta</label>
          <input type="text" id="end_date" name="end_date" value="{{allocation.formated_start_date}}" class="form-control datepicker" />
        </div>
      </div>  
      <div class="col s1">
        <div class="form-group">
          <label for="title">Horas</label>
          <input type="text" id="hours" name="hours" value="{{allocation.hours}}" class="form-control" />
        </div>
      </div>
     <div class="col s3">
        <div class="form-group">
          <label for="comment">Comentario</label>
          <textarea id="comment" name="comment" class="materialize-textarea" rows="1">{{allocation.comment}}</textarea>
        </div>
    </div>

    </div>
    
    <div class="row">
      <div class="col s6">
        <table id="days" class="responsive-table">
          <tbody>
          </tbody>
        </table>
      
      </div>  
    </div>  

    <input type="text" value="{{session.profile.id}}" id="user_id" name="user_id" hidden/>
    <input type="text" value="{{session.profile.emails[0].value}}" id="user_email" name="user_email" hidden/>
    <input type="text" value="created" id="status" name="status" hidden/>
    <div class="row">
      <div id="split_data">
      </div>
    </div>
    <div class="row">
      <div class="col s3">
        {% if action == 'Editar'%}
          <input id="submit" value="submit" type="submit"  class="btn btn-success" disabled></input>
        {% else %}
          <input id="submit" type="submit"  class="btn btn-success" disabled></input>
        {% endif %}
        </div>
    </div>
  </form>

 
{% endblock %}
